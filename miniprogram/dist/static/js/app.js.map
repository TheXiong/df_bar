{"version":3,"sources":["webpack:///./src/fly.js","webpack:///./src/main.js","webpack:///./src/App.vue","webpack:///./src/App.vue?d922","webpack:///src/App.vue","webpack:///./src/store/index.js"],"names":["Fly","require","fly","config","baseURL","interceptors","request","use","headers","wx","getStorageSync","response","data","code","showToast","title","msg","icon","duration","reject","err","Vue","productionTip","App","mpType","prototype","$store","$fly","app","$mount","pages","window","backgroundTextStyle","navigationBarBackgroundColor","navigationBarTitleText","navigationBarTextStyle","tabBar","color","selectedColor","backgroundColor","borderStyle","list","pagePath","iconPath","selectedIconPath","text","Vuex","Store","plugins","createPersistedState","storage","getItem","key","setItem","value","removeItem","clearStorageSync","state","commdityShopping","commdityOrder","userAddres","userOrderAddres","feedbackList","userInfo","mutations","setCommdityShoppingName","commdityShoppingName","setCommdityShopping","push","num","setCommdityShoppingAdd","commdityShoppingIndex","setCommdityShoppingLess","_","pullAt","setCommdityShoppingClear","setCommdityOrder","map","order","total","order_goods","reduce","prev","current","integral","number","join_time","formatTime","Date","setUserAddres","userAddresClone","clone","setUserOrderAddres","updateUserAddress","userAddress","index","addressName","addressPhone","addressDetail","delUserAddress","userAddressIndex","delCommdityOrder","commdityOrderIndex","addFeedbackList","feedbackListClone","setUserInfo","actions","commit","getNewUserInfo","resolve","post","then","res","setStorageSync","catch","removeStorageSync","navigateTo","url","e"],"mappings":"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","file":"static/js/app.js","sourcesContent":["let Fly = require(\"flyio/dist/npm/wx\");\r\nlet fly = new Fly();\r\n//定义公共headers\r\n// fly.config.headers={xx:5,bb:6,dd:7}\r\n//设置超时\r\n// fly.config.timeout=10000;\r\n//设置请求基地址\r\nfly.config.baseURL = \"https://mylife028.cn/api/v1/\"\r\n//设置公共的Get参数\r\n// fly.config.params={\"token\":\"testtoken\"};\r\nfly.interceptors.request.use(request => {\r\n    request.headers = {\r\n        \"Content-Type\": \"application/json\"\r\n    };\r\n    if (wx.getStorageSync('token')) {\r\n        request.headers['token'] = wx.getStorageSync('token')\r\n    }\r\n});\r\n\r\n\r\nfly.interceptors.response.use(\r\n    (response) => {\r\n        if (response.data.code == 0) {\r\n            return response\r\n        } else {\r\n            wx.showToast({\r\n                title: response.data.msg,\r\n                icon: \"none\",\r\n                duration: 2000\r\n            });\r\n            return Promise.reject(response.data.msg)\r\n        }\r\n    },\r\n    (err) => {\r\n        return Promise.reject(\"ssss\")\r\n    }\r\n)\r\nexport default fly\n\n\n// WEBPACK FOOTER //\n// ./src/fly.js","import Vue from 'vue'\r\nimport App from './App'\r\n\r\nimport store from './store/index'\r\nimport fly from './fly'\r\n\r\nVue.config.productionTip = false\r\nApp.mpType = 'app'\r\n\r\nVue.prototype.$store = store\r\nVue.prototype.$fly = fly\r\n\r\nconst app = new Vue(App)\r\napp.$mount()\r\n\r\nexport default {\r\n  // 这个字段走 app.json\r\n  config: {\r\n    // 页面前带有 ^ 符号的，会被编译成首页，其他页面可以选填，我们会自动把 webpack entry 里面的入口页面加进去\r\n    pages: [\r\n      '^pages/login/main',\r\n      'pages/register/main',\r\n      'pages/commodity/main',\r\n      'pages/order/main',\r\n      'pages/shopp/main',\r\n      'pages/user/main'\r\n    ],\r\n    window: {\r\n      backgroundTextStyle: 'light',\r\n      navigationBarBackgroundColor: '#0097ff',\r\n      navigationBarTitleText: '东方网咖',\r\n      navigationBarTextStyle: 'white'\r\n    },\r\n    tabBar: {\r\n      color: '#6f6f6f',\r\n      selectedColor: '#18a3ff',\r\n      backgroundColor: '#ffffff',\r\n      borderStyle: 'black',\r\n      list: [\r\n        {\r\n          pagePath: 'pages/commodity/main',\r\n          iconPath: 'static/img/tj1.png',\r\n          selectedIconPath: 'static/img/tj1s.png',\r\n          text: '点餐'\r\n        },\r\n        {\r\n          pagePath: 'pages/shopp/main',\r\n          iconPath: 'static/img/tj1.png',\r\n          selectedIconPath: 'static/img/tj1s.png',\r\n          text: '活动'\r\n        },\r\n        {\r\n          pagePath: 'pages/order/main',\r\n          iconPath: 'static/img/dd.png',\r\n          selectedIconPath: 'static/img/dds.png',\r\n          text: '订单'\r\n        },\r\n        {\r\n          pagePath: 'pages/user/main',\r\n          iconPath: 'static/img/user.png',\r\n          selectedIconPath: 'static/img/users.png',\r\n          text: '我的'\r\n        }\r\n      ]\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../node_modules/mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5c5de514\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!../node_modules/mpvue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../node_modules/mpvue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nvar __vue_template__ = null\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src\\\\App.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-5c5de514\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-5c5de514\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 54\n// module chunks = 8","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":false,\"sourceMap\":false}!./node_modules/mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-5c5de514\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./node_modules/postcss-loader/lib?{\"sourceMap\":true}!./node_modules/mpvue-loader/lib/selector.js?type=styles&index=0!./src/App.vue\n// module id = 55\n// module chunks = 8","<script>\r\nexport default {\r\n  created () {\r\n    // 调用API从本地缓存中获取数据\r\n    const logs = wx.getStorageSync('logs') || []\r\n    logs.unshift(Date.now())\r\n    wx.setStorageSync('logs', logs)\r\n\r\n    console.log('app created and cache logs by setStorageSync')\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.container {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  box-sizing: border-box;\r\n  background: #f5f5f5;\r\n}\r\n/* this rule will be remove */\r\n* {\r\n  transition: width 2s;\r\n  -moz-transition: width 2s;\r\n  -webkit-transition: width 2s;\r\n  -o-transition: width 2s;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue?4b3792af","import Vue from 'vue'\r\nimport Vuex from 'vuex'\r\nimport fly from '../fly.js'\r\n// import vuetron from 'vuetron '\r\nimport createPersistedState from 'vuex-persistedstate'\r\nimport _ from 'lodash'\r\nimport { formatTime } from \"../utils/index\";\r\n\r\nVue.use(Vuex)\r\n\r\nexport default new Vuex.Store({\r\n  plugins: [\r\n    // 保持会话持久\r\n    createPersistedState({\r\n      storage: {\r\n        getItem: key => wx.getStorageSync(key),\r\n        // Please see https://github.com/js-cookie/js-cookie#json, on how to handle JSON.\r\n        setItem: (key, value) => wx.getStorageSync(key, value),\r\n        removeItem: key => wx.clearStorageSync(key)\r\n      }\r\n    })\r\n  ],\r\n  state: {\r\n    /**\r\n     * 商家名字\r\n    commdityShoppingName: '',\r\n    /**\r\n     * 已经选购商品\r\n     */\r\n    commdityShopping: [],\r\n    /**\r\n     * 商家订单\r\n     */\r\n    commdityOrder: [],\r\n    /**\r\n     * 用户地址 后期使用数据库存储\r\n     */\r\n    userAddres: [],\r\n    userOrderAddres: 0,\r\n    // 意见反馈\r\n    feedbackList: [],\r\n    userInfo: {}\r\n  },\r\n\r\n  mutations: {\r\n    /**\r\n     * 设置商家名称\r\n     * @param state\r\n     * @param commdityShoppingName\r\n     */\r\n    setCommdityShoppingName (state, commdityShoppingName) {\r\n      state.commdityShoppingName = commdityShoppingName\r\n    },\r\n    /**\r\n     * 设置商家购物车商品\r\n     * @param state\r\n     * @param commdityShopping\r\n     */\r\n    setCommdityShopping (state, commdityShopping) {\r\n      state.commdityShopping.push({...commdityShopping,num:1})\r\n    },\r\n    /**\r\n     * 商家购物车商品添加\r\n     * @param state\r\n     * @param commdityShoppingIndex\r\n     */\r\n    setCommdityShoppingAdd (state, commdityShoppingIndex) {\r\n      state.commdityShopping[commdityShoppingIndex].num++\r\n    },\r\n    /**\r\n     * 商家购物车减少\r\n     * @param state\r\n     * @param commdityShoppingIndex\r\n     */\r\n    setCommdityShoppingLess (state, commdityShoppingIndex) {\r\n      if (state.commdityShopping[commdityShoppingIndex].num >= 1) {\r\n        state.commdityShopping[commdityShoppingIndex].num--\r\n        if (state.commdityShopping[commdityShoppingIndex].num === 0) {\r\n          _.pullAt(state.commdityShopping, commdityShoppingIndex)\r\n        }\r\n      }\r\n    },\r\n    /**\r\n     * 清空商家购物车\r\n     * @param state\r\n     */\r\n    setCommdityShoppingClear (state) {\r\n      state.commdityShopping = []\r\n    },\r\n    /**\r\n     * 将购物车的内容变成订单\r\n     * @param state\r\n     * @param commdityOrder\r\n     */\r\n    setCommdityOrder (state, commdityOrder) {\r\n      commdityOrder.map(order => {\r\n        order.total = order.order_goods.reduce((prev, current) => {\r\n          prev += current.integral * current.number\r\n          return prev\r\n        }, 0)\r\n        order.join_time = formatTime(new Date(order.join_time * 1000))\r\n      })\r\n\r\n      state.commdityOrder = commdityOrder\r\n    },\r\n    /**\r\n     * 设置用户收货地址\r\n     * @param state\r\n     * @param userAddres\r\n     */\r\n    setUserAddres (state, userAddres) {\r\n      let userAddresClone = _.clone(userAddres)\r\n      state.userAddres.push(userAddresClone)\r\n    },\r\n    /**\r\n     * 设置订单收货地址\r\n     * @param state\r\n     * @param userOrderAddres\r\n     */\r\n    setUserOrderAddres (state, userOrderAddres) {\r\n      state.userOrderAddres = userOrderAddres\r\n    },\r\n    /**\r\n     * 更新用户收货地址\r\n     * @param state\r\n     * @param userAddress\r\n     */\r\n    updateUserAddress (state, userAddress) {\r\n      state.userAddres[userAddress.index].addressName = userAddress.addressName\r\n      state.userAddres[userAddress.index].addressPhone = userAddress.addressPhone\r\n      state.userAddres[userAddress.index].addressDetail = userAddress.addressDetail\r\n    },\r\n    /**\r\n     * 删除用户收货地址\r\n     * @param state\r\n     * @param userAddressIndex\r\n     */\r\n    delUserAddress (state, userAddressIndex) {\r\n      _.pullAt(state.userAddres, userAddressIndex)\r\n    },\r\n    /**\r\n     * 删除用户订单\r\n     * @param state\r\n     * @param commdityOrderIndex\r\n     */\r\n    delCommdityOrder (state, commdityOrderIndex) {\r\n      _.pullAt(state.commdityOrder, commdityOrderIndex)\r\n    },\r\n    /**\r\n     * 增加意见反馈\r\n     * @param state\r\n     * @param feedbackList\r\n     */\r\n    addFeedbackList (state, feedbackList) {\r\n      let feedbackListClone = _.clone(feedbackList)\r\n      state.feedbackList.push(feedbackListClone)\r\n    },\r\n    setUserInfo (state, userInfo) {\r\n      state.userInfo = userInfo\r\n    }\r\n  },\r\n  /**\r\n   * 下面调用上面的方法\r\n   */\r\n  actions: {\r\n    setCommdityShoppingName ({ commit }, commdityShoppingName) {\r\n      commit('setCommdityShoppingName', commdityShoppingName)\r\n    },\r\n    setCommdityShopping ({commit}, commdityShopping) {\r\n      commit('setCommdityShopping', commdityShopping)\r\n    },\r\n    setCommdityShoppingAdd ({commit}, commdityShoppingIndex) {\r\n      commit('setCommdityShoppingAdd', commdityShoppingIndex)\r\n    },\r\n    setCommdityShoppingLess ({commit}, commdityShoppingIndex) {\r\n      commit('setCommdityShoppingLess', commdityShoppingIndex)\r\n    },\r\n    setCommdityShoppingClear ({commit}) {\r\n      commit('setCommdityShoppingClear')\r\n    },\r\n    setCommdityOrder ({commit}, commdityOrder) {\r\n      commit('setCommdityOrder', commdityOrder)\r\n    },\r\n    setUserAddres ({commit}, userAddres) {\r\n      commit('setUserAddres', userAddres)\r\n    },\r\n    setUserOrderAddres ({commit}, userOrderAddres) {\r\n      commit('setUserOrderAddres', userOrderAddres)\r\n    },\r\n    updateUserAddress ({commit}, userAddress) {\r\n      commit('updateUserAddress', userAddress)\r\n    },\r\n    delUserAddress ({commit}, userAddressIndex) {\r\n      commit('delUserAddress', userAddressIndex)\r\n    },\r\n    delCommdityOrder ({commit}, commdityOrderIndex) {\r\n      commit('delCommdityOrder', commdityOrderIndex)\r\n    },\r\n    addFeedbackList ({commit}, addFeedbackList) {\r\n      commit('addFeedbackList', addFeedbackList)\r\n    },\r\n    getNewUserInfo ({commit}) {\r\n      return new Promise((resolve, reject) => {\r\n        fly\r\n          .post('/u/information', {})\r\n          .then(res => {\r\n            let userInfo = res.data.data\r\n            wx.setStorageSync('userInfo', userInfo)\r\n            commit('setUserInfo', userInfo)\r\n            resolve()\r\n          })\r\n          .catch(() => {\r\n            try {\r\n              wx.showToast({\r\n                title: '获取用户信息失败，请重新登录',\r\n                icon: 'none',\r\n                duration: 2000\r\n              })\r\n              wx.removeStorageSync('token')\r\n              wx.navigateTo({\r\n                url: '../login/main'\r\n              })\r\n            } catch (e) {}\r\n          })\r\n      })\r\n    }\r\n  }\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js"],"sourceRoot":""}