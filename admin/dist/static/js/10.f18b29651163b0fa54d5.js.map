{"version":3,"sources":["webpack:///src/views/user/userList.vue","webpack:///./src/views/user/userList.vue?eb9e","webpack:///./src/views/user/userList.vue"],"names":["userList","roleList","callback","_this","this","baseForm","extends_default","row","clearValidate","_this2","_this3","_this4","$axios","post","network_manager_commission","getList","catch","error","_this5","level","id","postdata","then","res","_this6","integral","page","_this7","limit","search","users","count","_this8","newStatus","user_userList","render","_vm","_h","$createElement","_c","_self","attrs","inline","label","type","autocomplete","placeholder","model","value","$$v","expression","_v","on","click","query","reset","data","userListData","prop","scopedSlots","_u","key","fn","scope","active-value","inactive-value","active-text","inactive-text","change","switchChange","$set","_s","_f","join_time","size","$event","handleEdit","$index","handleEditRole","handleEditIntegral","background","layout","total","current-change","currentChange","prev-click","next-click","title","visible","roleVisible","width","update:visible","ref","roleForm","rules","roleFormRules","_l","item","level_cnname","staticClass","slot","roleSubmit","integralVisible","integralForm","integralFormRules","integralSubmit","baseVisible","baseFormRules","baseSubmit","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/10.f18b29651163b0fa54d5.js","sourcesContent":["<template>\r\n  <div>\r\n    <div>\r\n      <el-form inline>\r\n        <el-form-item label=\"搜索用户\">\r\n          <el-input type=\"text\" v-model=\"search\" autocomplete=\"off\" placeholder=\"用户id或电话\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"query\">查询</el-button>\r\n          <el-button @click=\"reset\">重置</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <el-table :data=\"userListData\">\r\n      <el-table-column prop=\"id\" label=\"ID\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"用户名\"></el-table-column>\r\n      <el-table-column prop=\"mobile\" label=\"电话\"></el-table-column>\r\n      <el-table-column prop=\"integral\" label=\"积分\"></el-table-column>\r\n      <el-table-column prop=\"level_name\" label=\"角色\"></el-table-column>\r\n      <el-table-column prop=\"status\" label=\"状态\">\r\n        <template slot-scope=\"scope\">\r\n          <el-switch\r\n            v-model=\"scope.row.status\"\r\n            @change=\"(newStatus)=>switchChange(newStatus,scope.row.id)\"\r\n            :active-value=\"-1\"\r\n            :inactive-value=\"0\"\r\n            active-text=\"冻结\"\r\n            inactive-text=\"正常\"\r\n          ></el-switch>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"join_time\" label=\"时间\">\r\n        <template slot-scope=\"scope\">{{scope.row.join_time | formatTimestamp}}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"handleEdit(scope.$index, scope.row)\">设置</el-button>\r\n          <el-button size=\"mini\" @click=\"handleEditRole(scope.$index, scope.row)\">设置角色</el-button>\r\n          <el-button size=\"mini\" @click=\"handleEditIntegral(scope.$index, scope.row)\">更改积分</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-pagination\r\n      background\r\n      layout=\"prev, pager, next\"\r\n      :total=\"total\"\r\n      @current-change=\"currentChange\"\r\n      @prev-click=\"currentChange\"\r\n      @next-click=\"currentChange\"\r\n    ></el-pagination>\r\n\r\n    <el-dialog title=\"设置角色\" :visible.sync=\"roleVisible\" width=\"30%\">\r\n      <el-form :model=\"roleForm\" ref=\"roleForm\" :rules=\"roleFormRules\">\r\n        <el-form-item label=\"角色\" prop=\"level\">\r\n          <el-select v-model=\"roleForm.level\" placeholder=\"请选择\">\r\n            <el-option\r\n              v-for=\"item in roleList\"\r\n              :key=\"item.level\"\r\n              :label=\"item.level_cnname\"\r\n              :value=\"item.level\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"roleVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"roleSubmit\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"更改积分\" :visible.sync=\"integralVisible\" width=\"30%\">\r\n      <el-form :model=\"integralForm\" ref=\"integralForm\" :rules=\"integralFormRules\">\r\n        <el-form-item label=\"变化值\" prop=\"integral\">\r\n          <el-input type=\"text\" v-model=\"integralForm.integral\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"integralVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"integralSubmit\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <el-dialog title=\"设置\" :visible.sync=\"baseVisible\" width=\"30%\">\r\n      <el-form :model=\"baseForm\" ref=\"baseForm\" :rules=\"baseFormRules\">\r\n        <el-form-item label=\"是否网管\" prop=\"is_network_manager\">\r\n          <el-switch\r\n            v-model=\"baseForm.is_network_manager\"\r\n            :active-value=\"1\"\r\n            :inactive-value=\"0\"\r\n            active-text=\"是\"\r\n            inactive-text=\"否\"\r\n          ></el-switch>\r\n        </el-form-item>\r\n        <el-form-item label=\"是否店长\" prop=\"is_store_manager\">\r\n          <el-switch\r\n            v-model=\"baseForm.is_store_manager\"\r\n            :active-value=\"1\"\r\n            :inactive-value=\"0\"\r\n            active-text=\"是\"\r\n            inactive-text=\"否\"\r\n          ></el-switch>\r\n        </el-form-item>\r\n        <el-form-item label=\"网管提成\" prop=\"network_manager_commission\">\r\n          <el-input type=\"text\" v-model=\"baseForm.network_manager_commission\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"会员所属网管ID\" prop=\"parent\">\r\n          <el-input type=\"text\" v-model=\"baseForm.parent\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"baseVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"baseSubmit\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"articleList\",\r\n  data() {\r\n    return {\r\n      total: 0,\r\n      page: 1,\r\n      limit: 10,\r\n      search: \"\",\r\n      sort: null,\r\n      userListData: [],\r\n      roleVisible: false,\r\n      roleForm: {\r\n        level: \"\"\r\n      },\r\n      roleFormRules: {\r\n        level: [{ required: true, message: \"请选择角色\", trigger: \"blur\" }]\r\n      },\r\n      roleList: this.$store.getters.roleList,\r\n      editRow: null,\r\n      integralVisible: false,\r\n      integralForm: {\r\n        integral: \"\"\r\n      },\r\n      integralFormRules: {\r\n        integral: [\r\n          { required: true, message: \"请填写积分变动值\", trigger: \"blur\" },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (!/^(\\-?)\\d+$/.test(value)) {\r\n                callback(new Error(\"请输入数字\"));\r\n                return;\r\n              }\r\n              if (value == 0) {\r\n                callback(new Error(\"变化值不能为0\"));\r\n                return;\r\n              }\r\n              callback();\r\n            },\r\n            trigger: \"blur\"\r\n          }\r\n        ]\r\n      },\r\n      baseVisible: false,\r\n      baseForm: {\r\n        is_network_manager: \"\",\r\n        network_manager_commission: \"\",\r\n        is_store_manager: \"\",\r\n        parent: \"\"\r\n      },\r\n      baseFormRules: {\r\n        is_network_manager: [],\r\n        network_manager_commission: [\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (value===''||value === '0') {\r\n                callback();\r\n                return;\r\n              }\r\n              if (/^0\\.\\d+$|^[1-9]+(\\.\\d+)?$/.test(value)) {\r\n                callback();\r\n              } else {\r\n                callback(new Error(\"请输入正数\"));\r\n              }\r\n            }\r\n          }\r\n        ],\r\n        is_store_manager: [],\r\n        parent: [\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              if (!value) {\r\n                callback();\r\n                return;\r\n              }\r\n              if (/^[1-9]\\d{0,}$/.test(value)) {\r\n                callback();\r\n              } else {\r\n                callback(new Error(\"请输入正整数\"));\r\n              }\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    handleEdit(index, row) {\r\n      this.baseForm = {\r\n        ...row\r\n      };\r\n      this.editRow = row;\r\n      this.baseVisible = true;\r\n      this.$nextTick(() => {\r\n        this.$refs.baseForm.clearValidate();\r\n      });\r\n    },\r\n    handleEditRole(index, row) {\r\n      this.roleForm = {\r\n        level: \"\"\r\n      };\r\n      this.editRow = row;\r\n      this.roleVisible = true;\r\n      this.$nextTick(() => {\r\n        this.$refs.roleForm.clearValidate();\r\n      });\r\n    },\r\n    handleEditIntegral(index, row) {\r\n      this.integralForm = {\r\n        integral: \"\"\r\n      };\r\n      this.editRow = row;\r\n      this.integralVisible = true;\r\n      this.$nextTick(() => {\r\n        this.$refs.integralForm.clearValidate();\r\n      });\r\n    },\r\n    baseSubmit() {\r\n      this.$refs.baseForm.validate(valid => {\r\n        if (valid) {\r\n          this.$axios\r\n            .post(\"/a/update_user\", {\r\n              ...this.baseForm,\r\n              network_manager_commission:\r\n                this.baseForm.network_manager_commission || 0\r\n            })\r\n            .then(res => {\r\n              this.$message({\r\n                showClose: true,\r\n                message: \"操作成功\",\r\n                type: \"success\"\r\n              });\r\n              this.getList();\r\n              this.baseVisible = false;\r\n            })\r\n            .catch(function(error) {\r\n              console.log(error);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    roleSubmit() {\r\n      this.$refs.roleForm.validate(valid => {\r\n        if (valid) {\r\n          let postdata = {\r\n            level: this.roleForm.level,\r\n            user_id: this.editRow.id\r\n          };\r\n          this.$axios\r\n            .post(\"/a/set_manager\", postdata)\r\n            .then(res => {\r\n              this.$message({\r\n                showClose: true,\r\n                message: \"操作成功\",\r\n                type: \"success\"\r\n              });\r\n              this.getList();\r\n              this.roleVisible = false;\r\n            })\r\n            .catch(function(error) {\r\n              console.log(error);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    integralSubmit() {\r\n      this.$refs.integralForm.validate(valid => {\r\n        if (valid) {\r\n          let postdata = {\r\n            integral: this.integralForm.integral,\r\n            user_id: this.editRow.id\r\n          };\r\n          this.$axios\r\n            .post(\"/a/gift_points\", postdata)\r\n            .then(res => {\r\n              this.$message({\r\n                showClose: true,\r\n                message: \"操作成功\",\r\n                type: \"success\"\r\n              });\r\n              this.getList();\r\n              this.integralVisible = false;\r\n            })\r\n            .catch(function(error) {\r\n              console.log(error);\r\n            });\r\n        }\r\n      });\r\n    },\r\n    currentChange(page) {\r\n      this.page = page;\r\n      this.getList();\r\n    },\r\n    getList() {\r\n      let postdata = {\r\n        page: this.page,\r\n        limit: this.limit,\r\n        search: this.search\r\n      };\r\n      this.$axios\r\n        .post(\"/a/user_list\", postdata)\r\n        .then(res => {\r\n          this.userListData = res.data.data.users;\r\n          this.total = res.data.data.count;\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    switchChange(newStatus, id) {\r\n      let postdata = {\r\n        status: newStatus,\r\n        user_id: id\r\n      };\r\n      this.$axios\r\n        .post(\"/a/update_user_status\", postdata)\r\n        .then(res => {\r\n          this.$message({\r\n            showClose: true,\r\n            message: \"操作成功\",\r\n            type: \"success\"\r\n          });\r\n          this.getList();\r\n        })\r\n        .catch(function(error) {\r\n          console.log(error);\r\n        });\r\n    },\r\n    query() {\r\n      this.getList();\r\n    },\r\n    reset() {\r\n      this.search = \"\";\r\n      this.getList();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getList();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/user/userList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',[_c('el-form',{attrs:{\"inline\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"搜索用户\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"用户id或电话\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.query}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.reset}},[_vm._v(\"重置\")])],1)],1)],1),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.userListData}},[_c('el-table-column',{attrs:{\"prop\":\"id\",\"label\":\"ID\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"用户名\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"mobile\",\"label\":\"电话\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"integral\",\"label\":\"积分\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"level_name\",\"label\":\"角色\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{attrs:{\"active-value\":-1,\"inactive-value\":0,\"active-text\":\"冻结\",\"inactive-text\":\"正常\"},on:{\"change\":function (newStatus){ return _vm.switchChange(newStatus,scope.row.id); }},model:{value:(scope.row.status),callback:function ($$v) {_vm.$set(scope.row, \"status\", $$v)},expression:\"scope.row.status\"}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"join_time\",\"label\":\"时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(_vm._s(_vm._f(\"formatTimestamp\")(scope.row.join_time)))]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleEdit(scope.$index, scope.row)}}},[_vm._v(\"设置\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleEditRole(scope.$index, scope.row)}}},[_vm._v(\"设置角色\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleEditIntegral(scope.$index, scope.row)}}},[_vm._v(\"更改积分\")])]}}])})],1),_vm._v(\" \"),_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"prev, pager, next\",\"total\":_vm.total},on:{\"current-change\":_vm.currentChange,\"prev-click\":_vm.currentChange,\"next-click\":_vm.currentChange}}),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"设置角色\",\"visible\":_vm.roleVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.roleVisible=$event}}},[_c('el-form',{ref:\"roleForm\",attrs:{\"model\":_vm.roleForm,\"rules\":_vm.roleFormRules}},[_c('el-form-item',{attrs:{\"label\":\"角色\",\"prop\":\"level\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.roleForm.level),callback:function ($$v) {_vm.$set(_vm.roleForm, \"level\", $$v)},expression:\"roleForm.level\"}},_vm._l((_vm.roleList),function(item){return _c('el-option',{key:item.level,attrs:{\"label\":item.level_cnname,\"value\":item.level}})}))],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.roleVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.roleSubmit}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"更改积分\",\"visible\":_vm.integralVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.integralVisible=$event}}},[_c('el-form',{ref:\"integralForm\",attrs:{\"model\":_vm.integralForm,\"rules\":_vm.integralFormRules}},[_c('el-form-item',{attrs:{\"label\":\"变化值\",\"prop\":\"integral\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.integralForm.integral),callback:function ($$v) {_vm.$set(_vm.integralForm, \"integral\", $$v)},expression:\"integralForm.integral\"}})],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.integralVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.integralSubmit}},[_vm._v(\"确 定\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"设置\",\"visible\":_vm.baseVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.baseVisible=$event}}},[_c('el-form',{ref:\"baseForm\",attrs:{\"model\":_vm.baseForm,\"rules\":_vm.baseFormRules}},[_c('el-form-item',{attrs:{\"label\":\"是否网管\",\"prop\":\"is_network_manager\"}},[_c('el-switch',{attrs:{\"active-value\":1,\"inactive-value\":0,\"active-text\":\"是\",\"inactive-text\":\"否\"},model:{value:(_vm.baseForm.is_network_manager),callback:function ($$v) {_vm.$set(_vm.baseForm, \"is_network_manager\", $$v)},expression:\"baseForm.is_network_manager\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"是否店长\",\"prop\":\"is_store_manager\"}},[_c('el-switch',{attrs:{\"active-value\":1,\"inactive-value\":0,\"active-text\":\"是\",\"inactive-text\":\"否\"},model:{value:(_vm.baseForm.is_store_manager),callback:function ($$v) {_vm.$set(_vm.baseForm, \"is_store_manager\", $$v)},expression:\"baseForm.is_store_manager\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"网管提成\",\"prop\":\"network_manager_commission\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.baseForm.network_manager_commission),callback:function ($$v) {_vm.$set(_vm.baseForm, \"network_manager_commission\", $$v)},expression:\"baseForm.network_manager_commission\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"会员所属网管ID\",\"prop\":\"parent\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\"},model:{value:(_vm.baseForm.parent),callback:function ($$v) {_vm.$set(_vm.baseForm, \"parent\", $$v)},expression:\"baseForm.parent\"}})],1)],1),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.baseVisible = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.baseSubmit}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-08dcadaf\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/user/userList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-08dcadaf\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./userList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./userList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./userList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-08dcadaf\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./userList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-08dcadaf\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/user/userList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}