webpackJsonp([6],{EEOA:function(t,e){},hF31:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("Dd8w"),r=a.n(o),i={name:"articleList",data:function(){return{total:0,page:1,limit:10,search:"",shopListData:[],shopTypeListData:[],editRow:null,dataFormVisible:!1,dataForm:{name:"",group:"",integral:""},dataFormRules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],group:[{required:!0,message:"请选择商品分组",trigger:"blur"}],integral:[{required:!0,message:"请输入积分",trigger:"blur"},{validator:function(t,e,a){/^[1-9]\d*$/.test(e)||a(new Error("请输入正整数")),a()},trigger:"blur"}]}}},filters:{getShopTypeName:function(t,e){if(0==e.length)return"";var a=e.filter(function(e){return e.id==t});return a[0]?a[0].name:""}},methods:{currentChange:function(t){this.page=t,this.getList()},getList:function(){var t=this,e={page:this.page,limit:this.limit,search:this.search};this.$axios.post("/a/goods_list",e).then(function(e){t.shopListData=e.data.data.goods,t.total=e.data.data.count}).catch(function(t){console.log(t)})},getTypeList:function(){var t=this;this.$axios.post("/u/goods_group_list",{}).then(function(e){t.shopTypeListData=e.data.data}).catch(function(t){console.log(t)})},handleCreate:function(){var t=this;this.dataForm={name:"",group:"",integral:""},this.dataFormVisible=!0,this.$nextTick(function(){t.$refs.dataForm.clearValidate()})},handleEdit:function(t,e){},formSubmit:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&t.$axios.post("/a/add_goods",r()({},t.dataForm,{tag:"1"})).then(function(e){t.$message({showClose:!0,message:"新增成功",type:"success"}),t.dataFormVisible=!1,t.getList()}).catch(function(t){console.log(t)})})},handleDelete:function(t,e){var a=this;this.$axios.post("/a/goods_del",{goods:e.id}).then(function(t){a.$message({showClose:!0,message:"删除成功",type:"success"}),a.getList()}).catch(function(t){console.log(t)})},query:function(){this.getList()},reset:function(){this.search="",this.getList()}},mounted:function(){this.getList(),this.getTypeList()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("el-form",{attrs:{inline:""}},[a("el-form-item",{attrs:{label:"搜索商品"}},[a("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"商品名"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("查询")]),t._v(" "),a("el-button",{on:{click:t.reset}},[t._v("重置")])],1)],1),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-circle-plus-outline",size:"mini"},on:{click:t.handleCreate}},[t._v("新增")])],1),t._v(" "),a("el-table",{attrs:{data:t.shopListData}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"商品名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"integral",label:"积分"}}),t._v(" "),a("el-table-column",{attrs:{prop:"group",label:"分组"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("getShopTypeName")(e.row.group,t.shopTypeListData)))]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.currentChange,"prev-click":t.currentChange,"next-click":t.currentChange}}),t._v(" "),a("el-dialog",{attrs:{title:t.dataForm.id?"编辑":"新增",visible:t.dataFormVisible,width:"40%"},on:{"update:visible":function(e){t.dataFormVisible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataFormRules}},[a("el-form-item",{attrs:{label:"商品名",prop:"name"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品分组",prop:"group"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.dataForm.group,callback:function(e){t.$set(t.dataForm,"group",e)},expression:"dataForm.group"}},t._l(t.shopTypeListData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"兑换积分",prop:"integral"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:t.dataForm.integral,callback:function(e){t.$set(t.dataForm,"integral",e)},expression:"dataForm.integral"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dataFormVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.formSubmit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(t){a("EEOA")},"data-v-40baaa7e",null);e.default=l.exports}});
//# sourceMappingURL=6.4eebcb648f67a7f1d7fd.js.map